<!DOCTYPE html>
<html lang="es">

<head>
    <meta http-equiv="content-type" content="text/html" charset="utf-8">
    <!-- css -->
    <link rel="stylesheet" href="css/lib/reset.css" type="text/css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/lib/jquery-ui-1.9.1.custom.min.css" type="text/css" media="screen">
    <link rel="stylesheet" href="css/lib/kendo.common.min.css" type="text/css" media="screen">
    <link rel="stylesheet" href="css/lib/kendo.metro.min.css" type="text/css" media="screen">
    <link rel="stylesheet" href="css/layout.css" type="text/css" media="screen">
    <!-- javascript libs-->
    <script type="text/javascript" src="js/lib/jquery-1.8.2.js"></script>
    <script type="text/javascript" src="js/lib/jquery-ui-1.9.1.custom.min.js"></script>
    <script type="text/javascript" src="js/lib/jquery.pajinate.js"></script>
    <script type="text/javascript" src="js/lib/kendo.web.min.js"></script>
    <script type="text/javascript" src="js/lib/underscore.js"></script>
    <script type="text/javascript" src="js/lib/knockout-2.1.0.js"></script>
    <script type="text/javascript" src="js/lib/knockout.mapping.js"></script>
    <script type="text/javascript" src="js/lib/sammy-latest.min.js" ></script>
    <script type="text/javascript" src="js/lib/knockout-kendo.min.js"></script>
    <!-- javascript custom-->
    <script type="text/javascript" src="js/dictionary.js" ></script>
    <script type="text/javascript" src="js/dragDrop.js"></script>
    <script type="text/javascript" src="js/pagination.js"></script>
    <script type="text/javascript" src="js/tooltips.js"></script>
    <script type="text/javascript" src="js/filters.js"></script>
    <script type="text/javascript" src="js/mvvm.js"></script>

    <link rel="icon" href="images/favicon.ico" type="image/x-icon"> 
    
	<title>Episteme</title>

</head>

<body>
    <div id="container">
        <div id="header">
	    <div id = "logo">
		<a href="#/main">
                <img class="epistemeLogo" src="images/episteme_logo.png" />
                </a>
		<br class="clear" />
            </div>

	    <div  id = "menuBar" data-bind="visible: page() < 3">
	        <div  class = "menuBarItem" data-bind="css: { selected: page() == 0 }">
		  <a href="#/main">
		  <div class = "menuItemIcon ">
                    <img src="images/opportunity.svg" />
		  </div>
		  <div class = "menuItemText "><span data-bind="text: lang().m1"></span></div>
		  <div class = "menuItemArrow"></div>
		  </a>
		</div>
		<div  class = "menuBarItem" data-bind="css: { inactive: status() < 1, selected: page() == 1 }">
		  <a href="#/composer">
		  <div class = "menuItemIcon ">
                    <img src="images/company.svg" />
		  </div>
		  <div class = "menuItemText"><span data-bind="text: lang().m2"></span></div>
		  </a>
		</div>
		<div  class = "menuBarItem" data-bind="css: { inactive: status() < 2,  selected: page() == 2 }">
		  <a href="#/finalize">
		  <div class = "menuItemIcon ">
                    <img src="images/finalize.svg" />
		  </div>
		  <div class = "menuItemText"><span data-bind="text: lang().m3"></span></div>
		  </a>
		</div>
		<div  class = "menuBarItem" data-bind="css: { inactive: status() < -1,  selected: help()}">
		  <a  href="#" data-bind="click: activateHelp">
		  <div class = "menuItemIcon ">
                    <img src="images/help.svg" />
		  </div>
		  <div class = "menuItemText"><span data-bind="text: lang().m5"></span></div>
		  </a>
		</div>
	    </div>
	    <div  id = "langBar" >
	        <a href="#" data-bind="click: changeLanguage.bind($data,'0')">
			<img class="flag" src="images/spanish.png" data-bind="css: { flagSelected: lang().lang == 'Spanish' }"/>		
		</a>
	        <a href="#" data-bind="click: changeLanguage.bind($data,'1')">
			<img class="flag" src="images/english.png" data-bind="css: { flagSelected: lang().lang == 'English' }"/>
		</a>
	    </div>
	    <div  id = "messageBar" >
		<div id = "mBarText" data-bind="text: filteredData().length + ' ' + lang().m4, visible: page() == 1" ></div>
	    </div>
        </div>

<div id="main" class="mainContainer" data-bind="visible: page() < 3">
<!-- KENDO FILTERS -->
<ul class="filterPanel" data-bind="kendoPanelBar: {}, foreach: loadedCategories">
    <li>
        <span class="filterName" data-bind="text: $parent.lang()[name()]"></span><span class="separator"></span>
        <ul class="filterGroup" data-bind="foreach: values">
            <li class="k-item k-state-default">
                <a class="filter k-link" href="#" data-bind="text: name,
                click: $root.selection.bind($data, $parent.id(), id, name()),
                css: { active: state() == true}"></a>
            </li>
        </ul>
    </li>
</ul>

<!-- DROPPABLES -->
<div class="dropContainer" data-bind="css: { offerContainer: page() == 0 }" >
    <div id="droppableElements">
        <div  class="droppable droppableOffer offer" class="class1" data-bind="visible: page() >= 0">
   	 <div class ="droppableText"> <span id ="droppableText1"  data-bind="text: lang().d1"></span> </div>
	</div>

	<h2 class="to" data-bind="visible: page() > 0">â†’</h2>

	<div  class="droppable droppableCompany company" class="class2" data-bind="visible: page() > 0 ">
   	 <div class ="droppableText"> <span id ="droppableText2"  data-bind="text: lang().d2"></span> </div>
	</div>

	<div  class="droppable droppableCompany company" class="class2" data-bind="visible: page() > 0">
   	 <div class ="droppableText"> <span id ="droppableText3"  data-bind="text: lang().d2"></span> </div>
	</div>

        <div id="finalizeContainer" class="finalizeContainer" data-bind="visible: page() == 2">
          <h2> <span data-bind="text: lang().f1"></span> </h2>
          <div class = "finalizeBtn"><a href="#"> <span data-bind="text: lang().f2"></span> </a></div>
          <div class = "finalizeBtn"><a href="#"> <span data-bind="text: lang().f3"></span> </a></div>
          <div class = "finalizeBtn"><a href="#"> <span data-bind="text: lang().f4"></span> </a></div>
          <div class = "finalizeBtn"><a href="#"> <span data-bind="text: lang().f5"></span> </a></div>
         </div>	

	<div id="lines" data-bind="visible: help() && page() == 0">
		<img class="img" data-bind="attr: { 'src': lang().i1 }">
	</div>

    </div>
</div>

<!-- CONTROL -->
<div class="controlContainer">
    <div id="filterBtn" data-bind="visible: false">
    <a class="category" href="#" data-filter-by-category="true"> <span data-bind="text: lang().b2"></span> </a>
    </div>
    <div id="filterBar" data-bind="if: page() == 1">
    <input id="search" data-bind="attr: { 'placeholder': lang().b1 }, value: filter, hasfocus: focusBar, valueUpdate: 'afterkeydown'"/>
    </div>
    <div id="Selectlines" data-bind="visible: $root.help() && $root.page() == 0">
        <img class="img" data-bind="attr: { 'src': $root.lang().i3 }">
    </div>
</div>

<!-- DRAGGABLES -->
<div class="dragContainer" data-bind="visible: page() < 2">
<div id="leftArrow" data-bind="visible: existPagination()">
  <a class="prevBtn" href="">
    <img id="larrow" src="images/larrow.png" />
  </a>
</div>

<div id="draggableElements">
  <div data-bind="foreach: viewOffers, visible: page() == 0, css: { content: page() == 0}">
    <div class="draggable offer" data-bind="attr: {'name': $data.name.value}">
      <div class="logoContainer">
        <!-- ko if: $data.logo != undefined -->
        <img class="defaultLogo" src="images/default.png" data-bind="attr: {src: $data.logo.value}"/>
        <!-- /ko -->
        <!-- ko if: $data.logo == undefined -->
        <img class="defaultLogo" src="images/default.png"/>
        <!-- /ko -->
      </div>
      <div class="textContainer">
        <p class="draggableText" data-bind="text: $data.name.value"></p>
      </div>
    </div>
    <!-- ko if: $index() == 13 && $parent.viewOffers().length > 14 -->
    <div class="offerButtonDIV">
      <a data-bind="attr: { 'href': './wizard/wizard.html?lang=' + $parent.lang().lang} ">
        <div id="newOfferContainer">
        <div id="newOfferText"> <span data-bind="text: $parent.lang().g1"></span> </div>
        
        </div>
      </a>
      <div id="Offerlines" data-bind="visible: $root.help() && $root.page() == 0">
        <img class="img" data-bind="attr: { 'src': $root.lang().i2 }">
      </div>
    </div>
    <!-- /ko -->
    <!-- ko if: $index() == $parent.viewOffers().length-1 && $parent.viewOffers().length < 15 -->
    <div class="offerButtonDIV">
      <a data-bind="attr: { 'href': './wizard/wizard.html?lang=' + $parent.lang().lang} ">
        <div id="newOfferContainer">
        <div id="newOfferText"> <span data-bind="text: $parent.lang().g1"></span> </div>
        
        </div>
      </a>
      <div id="Offerlines" data-bind="visible: $root.help() && $root.page() == 0">
        <img class="img" data-bind="attr: { 'src': $root.lang().i2 }">
      </div>
    </div>
    <!-- /ko -->
  </div>

  <div data-bind="foreach: filteredData, beforeRemove: hideElement, visible: page() == 1, css: { content: page() == 1}">
    <div id="draggable" class="draggable" data-bind="attr: { 'name': $data.name.value, 'title': '<b>'+$data.name.value()+'</b><br>' + $data.summary.value(), 'province': $data.province.value}">
      <div class="logoContainer">
        <!-- ko if: $data.logo != undefined -->
        <img class="defaultLogo" src="images/default.png" data-bind="attr: {src: $data.logo.value}"/>
        <!-- /ko -->
        <!-- ko if: $data.logo == undefined -->
        <img class="defaultLogo" src="images/default.png"/>
        <!-- /ko -->
      </div>
      <div class="textContainer">
        <p class="draggableText" data-bind="text: $data.name.value"></p>
      </div>
    </div>
  </div>

  <div class="page_navigation"></div>

  <div class="message" data-bind="visible: filteredData().length < 1 && filter() != '' ">
    <div class="med">
      <p>
        <span data-bind="text: lang().h1"></span>
        <b><span data-bind="text: filter"></span></b>
        <span data-bind="text: lang().h2"></span>
      </p><br>
      <p><span data-bind="text: lang().h3"></span></p><br>
      <ul>
        <li><span data-bind="text: lang().h4"></span></li>
        <li><span data-bind="text: lang().h5"></span></li>
        <li><span data-bind="text: lang().h6"></span></li>
      </ul>
    </div>
  </div>
</div>
<div id="rightArrow" data-bind="visible: existPagination()">
  <a  class="nextBtn"  href="">
    <img id="rarrowIMG" src="images/rarrow.png" />
  </a>
</div>
</div>	

<div data-bind="autoPaginate: filteredData"></div>
<!--
<pre data-bind="text: ko.toJSON(loadedCategories, null, 2)"></pre>
-->
</div>

<div id="OfferDetails">
</div>

<div id="footer">
            <p><span data-bind="text: lang().c1"></span></p>
		<a href="http://gsi.dit.upm.es/" target="_blank">
		<img class="gsiLogo" src="images/gsi_logo_gray.png" />
		</a>
		<a href="http://www.globalmetanoia.com/" target="_blank">
		<img class="globalLogo" src="images/GlobalMetanoia_logo_gray.png" />
		</a>
        </div>
<div id="blackDIV"></div>
<div id="blackCont">
  <div id="loading"><img id="loadingIMG" src="images/loading.gif"/></div>
  <div id="blackMSG"><div id="blackText"><p>Puedes arrastrar este elemento</p></div></div>
</div>
</body>

</html>





