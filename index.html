<!DOCTYPE html>
<html lang="es">

<head>
    <meta http-equiv="content-type" content="text/html" charset="utf-8">
    <!-- css -->
    <link rel="stylesheet" href="css/lib/reset.css" type="text/css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/lib/jquery-ui-1.9.0.custom.min.css" type="text/css" media="screen">
    <link rel="stylesheet" href="css/layout.css" type="text/css" media="screen">
    <!-- javascript libs-->
    <script type="text/javascript" src="js/lib/jquery-1.8.2.js"></script>
    <script type="text/javascript" src="js/lib/jquery-ui-1.9.0.custom.js"></script>
    <script type="text/javascript" src="js/lib/jquery.pajinate.js"></script>
    <script type="text/javascript" src="js/lib/underscore.js"></script>
    <script type="text/javascript" src="js/lib/knockout-2.1.0.js"></script>
    <script type="text/javascript" src="js/lib/knockout.mapping.js"></script>
    <script type="text/javascript" src="js/lib/sammy-latest.min.js" ></script>
    <script type="text/javascript" src="js/lib/jquery.qtip-1.0.0-rc3.min.js" ></script>
    <!-- javascript custom-->
    <script type="text/javascript" src="js/dictionary.js" ></script>
    <script type="text/javascript" src="js/dragDrop.js"></script>
    <script type="text/javascript" src="js/pagination.js"></script>
    <script type="text/javascript" src="js/tooltips.js"></script>
    <script type="text/javascript" src="js/filters.js"></script>
    <script type="text/javascript" src="js/mvvm.js"></script>

    <link rel="icon" href="images/favicon.ico" type="image/x-icon"> 
    
	<title>Episteme</title>

</head>

<body>
    <div id="container">
        <div id="header">
	    <div id = "logo">
		<a href="#/main">
                <img class="epistemeLogo" src="images/episteme_logo.png" />
            </a>
		<br class="clear" />
            </div>

	    <div  id = "menuBar" data-bind="visible: page() < 3">
	        <div  class = "menuBarItem" data-bind="css: { selected: page() == 0 }">
		  <div class = "menuItemText "><a href="#/main"><span data-bind="text: lang().m1"></span></a></div>
		  <div class = "menuItemArrow"></div>
		</div>
		<div  class = "menuBarItem" data-bind="css: { inactive: status() < 1, selected: page() == 1 }">
		  <div class = "menuItemText"><a href="#/composer"><span data-bind="text: lang().m2"></span></a></div>
		  <div class = "menuItemArrow"></div>
		</div>
		<div  class = "menuBarItem" data-bind="css: { inactive: status() < 2,  selected: page() == 2 }">
		  <div class = "menuItemText"><a href="#/finalize"><span data-bind="text: lang().m3"></span></a></div>
		  <div class = "menuItemArrow"></div>
		</div>
	    </div>
	    <div  id = "langBar" data-bind="visible: page() < 3">
	        <a href="#" data-bind="click: changeLanguage.bind($data,'0')">
			<img class="flag" src="images/spanish.png" data-bind="css: { flagSelected: lang().lang == 'Spanish' }"/>		
		</a>
	        <a href="#" data-bind="click: changeLanguage.bind($data,'1')">
			<img class="flag" src="images/english.png" data-bind="css: { flagSelected: lang().lang == 'English' }"/>
		</a>
	    </div>
        </div>

<div id="main" class="mainContainer" data-bind="visible: page() < 3">
<img id = "loading" src="images/loading.gif" data-bind="visible: loading()"/>

<div class="dropContainer" data-bind="css: { offerContainer: page() == 0 }" >

        <div  class="droppable offer" class="class1" data-bind="visible: page() >= 0">
   	 <div class ="droppableText"> <span data-bind="text: lang().d1"></span> </div>
	</div>

	<h2 class="to" data-bind="visible: page() > 0">â†’</h2>

	<div  class="droppable company" class="class2" data-bind="visible: page() > 0 ">
   	 <div class ="droppableText"> <span data-bind="text: lang().d2"></span> </div>
	</div>

	<div  class="droppable company" class="class2" data-bind="visible: page() > 0">
   	 <div class ="droppableText"> <span data-bind="text: lang().d2"></span> </div>
	</div>

	<div id="finalizeContainer" class="finalizeContainer" data-bind="if: page() == 2">
                <h2> <span data-bind="text: lang().f1"></span> <br></h2><br>
                <ul>
                    <li><a href="#"> <span data-bind="text: lang().f2"></span> </a></li>
                    <li><a href="#"> <span data-bind="text: lang().f3"></span> </a></li>
                    <li><a href="#"> <span data-bind="text: lang().f4"></span> </a></li>
                    <li><a href="#"> <span data-bind="text: lang().f5"></span> </a></li>
            </ul>
	</div>	
	<div id="lines" data-bind="visible: status() == 0"></div>
</div>


<div class="controlContainer" data-bind="visible: page() < 2">
    <div id="filterBtn">
    <a class="category" href="#" data-filter-by-category="true"> <span data-bind="text: lang().b2"></span> </a>
    </div>
    <input id="search" data-bind="attr: { 'placeholder': lang().b1 }, value: filter, hasfocus: focusBar, valueUpdate: 'afterkeydown'" />
</div>


<div id="dragContainer" class="dragContainer" data-bind="visible: page() < 2">

	<div data-bind="foreach: filteredData" class="content" >
        <div class="draggable" data-bind="attr: { 'name': $data.name.value }">
	    <div class="logoContainer">
	    <img class="defaultLogo" src="images/default.png" data-bind="attr: { 'src': $data.logo.value } " />
	    </div>
	    <div class="textContainer">
            <p class="draggableText" data-bind="text: $data.name.value"></p>
	    </div>
        </div>

    </div>	
	<a href="#/wizard" data-bind="visible: filteredData().length > 0">
	<div id="new_offer_entry" class="add-arrow" data-bind="visible: page() < 1"></div>
	</a>
	  <div class="page_navigation" data-bind="visible: filteredData().length > 0"></div>
	  <div class="message" data-bind="visible: filteredData().length < 1">
		<div class="med">
			<p>
			<span data-bind="text: lang().h1"></span>
			<b><span data-bind="text: filter"></span></b>
			<span data-bind="text: lang().h2"></span>
			</p><br>
			<p><span data-bind="text: lang().h3"></span></p><br>
			<ul>
				<li><span data-bind="text: lang().h4"></span></li>
				<li><span data-bind="text: lang().h5"></span></li>
				<li><span data-bind="text: lang().h6"></span></li>
			</ul>
		</div>
	</div>
	
</div>	

<div data-bind="autoPaginate: filteredData"></div>
<!--
<pre data-bind="text: ko.toJSON(loadedCategories, null, 2)"></pre>
-->

<div id="dialog" data-bind="attr: { 'title': lang().b3 }">
    <div id="tabs">
    <ul data-bind="foreach: loadedCategories">
        <li><a data-bind="attr: { 'href': '#'+name() }"> <span data-bind="text: $parent.lang()[name()]"></span> </a></li>
    </ul>
    <span data-bind="foreach: loadedCategories">
    <div data-bind="attr: { 'id': name() }">
	<div data-bind="foreach: values ">
          <div class="filterSelBtn" data-bind="css: { catActive: state() == true}">
            <a class="category" href="#" data-bind="text: name, click: $root.selection.bind($data, $parent.id(), id, name())"></span> </a>
          </div>
        </div>
    </div>
    </span>
</div>
</div>

</div>




        <div id="footer">
            <p><span data-bind="text: lang().c1"></span></p>
		<a href="http://gsi.dit.upm.es/" target="_blank">
		<img class="gsiLogo" src="images/gsi_logo_gray.png" />
		</a>
		<a href="http://www.globalmetanoia.com/" target="_blank">
		<img class="globalLogo" src="images/GlobalMetanoia_logo_gray.png" />
		</a>
        </div>

    </div>

</body>

</html>





